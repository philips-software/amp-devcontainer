---
name: Close Stale Issues & Pull Requests

on:
  schedule:
    - cron: "30 1 * * *"

permissions: {}

jobs:
  close-issues:
    runs-on: ubuntu-latest
    permissions:
      issues: write # `issues: write` is needed to close/comment on issues (actions/stale)
      pull-requests: write # `pull-requests: write` is needed to close/comment on PRs (actions/stale)
    steps:
      - uses: step-security/harden-runner@f4a75cfd619ee5ce8d5b864b0d183aff3c69b55a # v2.13.1
        with:
          disable-sudo-and-containers: true
          egress-policy: audit
      - uses: actions/stale@5f858e3efba33a5ca4407a664cc011ad407f2008 # v10.1.0
        with:
          stale-issue-label: "stale"
          stale-pr-label: "stale"
          stale-issue-message: "This issue is marked stale because it has been open for an extended period with no activity. Remove the 'stale' label or comment otherwise this issue will be closed in 7 days."
          stale-pr-message: "This pull request is marked stale because it has been open for an extended period with no activity. Remove the 'stale' label or comment otherwise this pull request will be closed in 7 days."
          exempt-all-milestones: true
